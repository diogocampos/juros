{"version":3,"sources":["components/format.js","components/NumberField.js","constants.js","state/actionTypes.js","state/mode.js","state/values.js","state/calculate.js","state/results.js","state/index.js","components/Fields.js","components/Modes.js","components/Results.js","components/App.js","index.js"],"names":["DECIMAL_SEPARATOR","THOUSANDS_SEPARATOR","formatNumber","number","decimals","arguments","length","undefined","_number$toFixed$split","toFixed","split","_number$toFixed$split2","Object","slicedToArray","integer","fraction","modulo","thousands","slice","i","push","join","parseDigits","textValue","digits","replace","string","targetLength","padString","padding","padStart","cut","MAX_DIGITS","NumberField","inputRef","React","createRef","handleChange","event","target","value","_this","props","onChange","name","handleFocus","setTimeout","input","current","end","setSelectionRange","handleKeyDown","keyCode","preventDefault","_this$props","this","label","react_default","a","createElement","className","type","pattern","inputMode","placeholder","onClick","onFocus","onKeyDown","ref","Component","DEPOSIT","INSTALLMENT","INTEREST","LENGTH","PRICE","TOTAL","fieldNamesByMode","_fieldNamesByMode","defineProperty","fieldProps","_fieldProps","prefix","suffix","SET_MODE","SET_RESULTS","CLEAR_VALUES","SET_VALUE","modes","setMode","mode","defaultState","state","action","indexOf","clearValues","setValue","_defaultState","values","keys","objectSpread","calculate","_ref","_ref2","deposit","k","installment","interest","price","_installment","isNaN","Error","calculateInstallment","calculateTotal","owed","iterations","lowerBound","upperBound","interestRate","error","Math","abs","calculateInterest","concat","pow","calculateResults","dispatch","getState","_getState","results","_unused","setResults","actions","modeActions","valuesActions","resultsActions","rootReducer","combineReducers","reducer","newState","saveState","STATE","fn","delay","timeout","_len","args","Array","_key","clearTimeout","apply","debounce","localStorage","setItem","JSON","stringify","Fields","handleReset","onReset","handleSubmit","onSubmit","fieldNames","noValidate","map","src_components_NumberField","assign","key","connect","currentMode","classNames","Result","App","components_Modes","src_components_Fields","components_Results","ReactDOM","render","component","initialState","parse","getItem","loadState","store","createStore","applyMiddleware","thunk","es","wrap","components_App","document","getElementById"],"mappings":"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","file":"static/js/main.35aca8b9.chunk.js","sourcesContent":["const DECIMAL_SEPARATOR = ','\nconst THOUSANDS_SEPARATOR = '.'\n\n/**\n * Formats a number as a string with thousands and decimal separators.\n * @param {number} number The number\n * @param {number} decimals The amount of decimal digits to include\n * @returns {string} The resulting string\n */\nexport function formatNumber(number, decimals = 2) {\n  const [integer, fraction] = number.toFixed(decimals).split('.')\n  const modulo = integer.length % 3\n  const thousands = modulo ? [integer.slice(0, modulo)] : []\n  for (let i = modulo; i < integer.length; i += 3) {\n    thousands.push(integer.slice(i, i + 3))\n  }\n  return (\n    thousands.join(THOUSANDS_SEPARATOR) +\n    (fraction ? DECIMAL_SEPARATOR + fraction : '')\n  )\n}\n\n/**\n * Parses a string of digits into a number.\n * @param {string} textValue The string\n * @param {number} decimals The amount of decimal digits to consider\n * @returns {number} The corresponding number\n */\nexport function parseDigits(textValue, decimals = 2) {\n  let digits = textValue.replace(/[^\\d]/g, '')\n  if (digits.length < decimals) digits = padStart(digits, decimals, '0')\n\n  const cut = digits.length - decimals\n  return +(digits.slice(0, cut) + '.' + digits.slice(cut))\n}\n\nfunction padStart(string, targetLength, padString = ' ') {\n  for (var padding = ''; padding.length + string.length < targetLength; ) {\n    padding += padString\n  }\n  return padding.slice(0, targetLength - string.length) + string\n}\n","import React from 'react'\n\nimport './NumberField.css'\nimport { formatNumber, parseDigits } from './format'\n\nconst MAX_DIGITS = 16\n\nclass NumberField extends React.Component {\n  inputRef = React.createRef()\n\n  handleChange = event => {\n    const digits = event.target.value.replace(/[^\\d]/g, '')\n    if (digits.length > MAX_DIGITS) return\n\n    const value = parseDigits(digits, this.props.decimals)\n    this.props.onChange(this.props.name, value)\n  }\n\n  handleFocus = () => {\n    setTimeout(() => {\n      const input = this.inputRef.current\n      const end = input.value.length\n      input.setSelectionRange(end, end)\n    }, 0)\n  }\n\n  handleKeyDown = event => {\n    // Ignore arrow keys, Home/End, Page Up/Down\n    if (33 <= event.keyCode && event.keyCode <= 40) event.preventDefault()\n\n    // Escape key clears the field\n    if (event.keyCode === 27) this.props.onChange(this.props.name)\n  }\n\n  render() {\n    const { name, label, value, decimals } = this.props\n    return (\n      <label className=\"NumberField\">\n        <span className=\"NumberField-label\">{label}</span>\n        <input\n          className=\"NumberField-input\"\n          type=\"text\"\n          pattern=\"[0-9]*\" // Show numeric keyboard on iOS\n          inputMode=\"decimal\" // Show numeric keyboard on Android\n          placeholder={formatNumber(0, decimals)}\n          name={name}\n          value={value ? formatNumber(value, decimals) : ''}\n          onChange={this.handleChange}\n          onClick={this.handleFocus}\n          onFocus={this.handleFocus}\n          onKeyDown={this.handleKeyDown}\n          ref={this.inputRef}\n        />\n      </label>\n    )\n  }\n}\n\nexport default NumberField\n","export const DEPOSIT = 'deposit'\nexport const INSTALLMENT = 'installment'\nexport const INTEREST = 'interest'\nexport const LENGTH = 'length'\nexport const PRICE = 'price'\nexport const TOTAL = 'total'\n\nexport const fieldNamesByMode = {\n  [INSTALLMENT]: [PRICE, DEPOSIT, LENGTH, INTEREST],\n  [INTEREST]: [PRICE, DEPOSIT, LENGTH, INSTALLMENT],\n}\n\nexport const fieldProps = {\n  [DEPOSIT]: { label: 'Entrada', prefix: '$' },\n  [INSTALLMENT]: { label: 'Valor da parcela', prefix: '$' },\n  [INTEREST]: { label: 'Taxa de juros', suffix: '%' },\n  [LENGTH]: { label: 'Número de parcelas', decimals: 0 },\n  [PRICE]: { label: 'Valor à vista', prefix: '$' },\n  [TOTAL]: { label: 'Total a prazo', prefix: '$' },\n}\n","export const SET_MODE = 'mode/set-mode'\n\nexport const SET_RESULTS = 'results/set-results'\n\nexport const CLEAR_VALUES = 'values/clear-values'\nexport const SET_VALUE = 'values/set-value'\n","import { SET_MODE } from './actionTypes'\nimport { INSTALLMENT, INTEREST } from '../constants'\n\nconst modes = [INSTALLMENT, INTEREST]\n\n// ACTIONS\n\nexport const setMode = mode => ({ type: SET_MODE, mode })\n\n// REDUCER\n\nconst defaultState = INTEREST\n\nexport default function mode(state = defaultState, action) {\n  switch (action.type) {\n    case SET_MODE:\n      if (modes.indexOf(action.mode) < 0) return state\n      return action.mode\n\n    default:\n      return state\n  }\n}\n","import { CLEAR_VALUES, SET_VALUE } from './actionTypes'\nimport { DEPOSIT, INSTALLMENT, INTEREST, LENGTH, PRICE } from '../constants'\n\n// ACTIONS\n\nexport const clearValues = () => ({ type: CLEAR_VALUES })\nexport const setValue = (name, value) => ({ type: SET_VALUE, name, value })\n\n// REDUCER\n\nconst defaultState = {\n  [DEPOSIT]: 0,\n  [INSTALLMENT]: 0,\n  [INTEREST]: 0,\n  [LENGTH]: 0,\n  [PRICE]: 0,\n}\n\nexport default function values(state = defaultState, action) {\n  switch (action.type) {\n    case CLEAR_VALUES:\n      return defaultState\n\n    case SET_VALUE:\n      const { name, value } = action\n      if (Object.keys(defaultState).indexOf(name) < 0) return state\n      return { ...state, [name]: value || defaultState[name] }\n\n    default:\n      return state\n  }\n}\n","import * as k from '../constants'\n\nexport default function calculate(mode, values) {\n  let deposit = values[k.DEPOSIT]\n  let installment = values[k.INSTALLMENT]\n  let interest = values[k.INTEREST]\n  let length = values[k.LENGTH]\n  let price = values[k.PRICE]\n\n  switch (mode) {\n    case k.INSTALLMENT:\n      installment = calculateInstallment(price, deposit, length, interest)\n      return {\n        [k.INSTALLMENT]: installment,\n        [k.TOTAL]: calculateTotal(deposit, length, installment),\n      }\n\n    case k.INTEREST:\n      return {\n        [k.INTEREST]: calculateInterest(price, deposit, length, installment),\n        [k.TOTAL]: calculateTotal(deposit, length, installment),\n      }\n\n    default:\n      throw new Error(`Invalid mode: '${mode}'`)\n  }\n}\n\nfunction calculateInstallment(price, deposit, length, interest) {\n  const owed = price - deposit\n  const installment = _installment(owed, interest / 100, length)\n  if (isNaN(installment)) throw new Error('Installment calculation failed')\n  return installment\n}\n\nfunction calculateInterest(price, deposit, length, installment) {\n  const owed = price - deposit\n  let iterations = 0\n  let [lowerBound, upperBound] = [0, 1e6]\n\n  while (++iterations <= 1000) {\n    const interestRate = (lowerBound + upperBound) / 2\n    const error = _installment(owed, interestRate, length) - installment\n\n    if (Math.abs(error) < 1e-6) {\n      return interestRate * 100\n    }\n    if (error > 0) {\n      upperBound = interestRate\n    } else {\n      lowerBound = interestRate\n    }\n  }\n\n  throw new Error('Interest calculation did not converge')\n}\n\nfunction calculateTotal(deposit, length, installment) {\n  return deposit + length * +installment.toFixed(2)\n}\n\nfunction _installment(owed, interestRate, length) {\n  if (interestRate > 0) {\n    return (owed * interestRate) / (1 - 1 / Math.pow(1 + interestRate, length))\n  } else {\n    return owed / length\n  }\n}\n","import { CLEAR_VALUES, SET_MODE, SET_RESULTS, SET_VALUE } from './actionTypes'\nimport calculate from './calculate'\n\n// ACTIONS\n\nconst setResults = results => ({ type: SET_RESULTS, results })\n\nexport const calculateResults = () => (dispatch, getState) => {\n  const { mode, values } = getState()\n  try {\n    var results = calculate(mode, values)\n  } catch {\n    results = 'error'\n  }\n  dispatch(setResults(results))\n}\n\n// REDUCER\n\nconst defaultState = null\n\nexport default function results(state = defaultState, action) {\n  switch (action.type) {\n    case SET_RESULTS:\n      return action.results\n\n    case CLEAR_VALUES:\n    case SET_MODE:\n    case SET_VALUE:\n      return defaultState\n\n    default:\n      return state\n  }\n}\n","import React from 'react'\nimport { Provider } from 'react-redux'\nimport { applyMiddleware, combineReducers, createStore } from 'redux'\nimport thunk from 'redux-thunk'\n\nimport mode, * as modeActions from './mode'\nimport values, * as valuesActions from './values'\nimport results, * as resultsActions from './results'\n\nexport const actions = {\n  ...modeActions,\n  ...valuesActions,\n  ...resultsActions,\n}\n\nconst rootReducer = combineReducers({\n  mode,\n  values,\n  results,\n})\n\nfunction reducer(state, action) {\n  const newState = rootReducer(state, action)\n  if (newState !== state) saveState(newState)\n  return newState\n}\n\nexport function wrap(component) {\n  const initialState = loadState() || {}\n  const store = createStore(reducer, initialState, applyMiddleware(thunk))\n  return <Provider store={store}>{component}</Provider>\n}\n\n// Storage\n\nconst STATE = 'state'\n\nconst saveState = debounce(state => {\n  localStorage.setItem(STATE, JSON.stringify(state))\n}, 1000)\n\nfunction loadState() {\n  try {\n    return JSON.parse(localStorage.getItem(STATE) || '')\n  } catch {}\n}\n\n// Helpers\n\nfunction debounce(fn, delay) {\n  let timeout = null\n  return (...args) => {\n    if (timeout) clearTimeout(timeout)\n    timeout = setTimeout(() => {\n      fn(...args)\n      timeout = null\n    }, delay)\n  }\n}\n","import React from 'react'\nimport { connect } from 'react-redux'\n\nimport './Fields.css'\nimport NumberField from './NumberField'\nimport { fieldNamesByMode, fieldProps } from '../constants'\nimport { actions } from '../state'\n\nclass Fields extends React.Component {\n  handleReset = event => {\n    event.preventDefault()\n    this.props.onReset()\n  }\n\n  handleSubmit = event => {\n    event.preventDefault()\n    this.props.onSubmit()\n  }\n\n  render() {\n    const { mode, values, onChange } = this.props\n    const fieldNames = fieldNamesByMode[mode]\n    return (\n      <form\n        className=\"Fields\"\n        onReset={this.handleReset}\n        onSubmit={this.handleSubmit}\n        noValidate\n      >\n        <div className=\"Fields-inputs\">\n          {fieldNames.map(name => (\n            <NumberField\n              key={name}\n              name={name}\n              value={values[name]}\n              onChange={onChange}\n              {...fieldProps[name]}\n            />\n          ))}\n        </div>\n        <div className=\"Fields-buttons\">\n          <button className=\"Fields-button\" type=\"reset\">\n            Limpar\n          </button>\n          <button className=\"Fields-button primary\" type=\"submit\">\n            Calcular\n          </button>\n        </div>\n      </form>\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  mode: state.mode,\n  values: state.values,\n})\n\nconst mapDispatchToProps = dispatch => ({\n  onChange: (name, value) => dispatch(actions.setValue(name, value)),\n  onReset: () => dispatch(actions.clearValues()),\n  onSubmit: () => dispatch(actions.calculateResults()),\n})\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Fields)\n","import classNames from 'classnames'\nimport React from 'react'\nimport { connect } from 'react-redux'\n\nimport './Modes.css'\nimport { INSTALLMENT, INTEREST } from '../constants'\nimport { actions } from '../state'\n\nconst modes = [\n  { mode: INTEREST, label: 'Juros' },\n  { mode: INSTALLMENT, label: 'Parcela' },\n]\n\nfunction Modes(props) {\n  const { mode: currentMode, onChange } = props\n  return (\n    <div className=\"Modes\">\n      {modes.map(({ mode, label }) => (\n        <button\n          key={mode}\n          className={classNames('Modes-mode', mode === currentMode && 'active')}\n          onClick={() => mode !== currentMode && onChange(mode)}\n        >\n          {label}\n        </button>\n      ))}\n    </div>\n  )\n}\n\nconst mapStateToProps = state => ({\n  mode: state.mode,\n})\n\nconst mapDispatchToProps = dispatch => ({\n  onChange: mode => dispatch(actions.setMode(mode)),\n})\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Modes)\n","import classNames from 'classnames'\nimport React from 'react'\nimport { connect } from 'react-redux'\n\nimport './Results.css'\nimport { formatNumber } from './format'\nimport { fieldProps } from '../constants'\n\nfunction Results(props) {\n  const { results } = props\n  if (!results) return null\n\n  return (\n    <div className={classNames('Results', results === 'error' && 'error')}>\n      {results !== 'error' ? (\n        Object.keys(results).map(name => (\n          <Result\n            key={name}\n            {...fieldProps[name]}\n            value={formatNumber(results[name], fieldProps[name].decimals)}\n          />\n        ))\n      ) : (\n        <Result label=\"Erro\" value=\"Verifique os valores preenchidos.\" />\n      )}\n    </div>\n  )\n}\n\nfunction Result(props) {\n  const { label, prefix, value, suffix } = props\n  return (\n    <div className=\"Results-result\">\n      <h3 className=\"Results-label\">{label}</h3>\n      <p className=\"Results-value\">\n        {prefix && <span className=\"Results-unit\">{prefix}</span>}\n        {value}\n        {suffix && <span className=\"Results-unit\">{suffix}</span>}\n      </p>\n    </div>\n  )\n}\n\nconst mapStateToProps = state => ({\n  results: state.results,\n})\n\nexport default connect(mapStateToProps)(Results)\n","import React from 'react'\n\nimport './App.css'\nimport Fields from './Fields'\nimport Modes from './Modes'\nimport Results from './Results'\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Modes />\n      <Fields />\n      <Results />\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport App from './components/App'\nimport { wrap } from './state'\n//import * as serviceWorker from './serviceWorker'\n\nReactDOM.render(wrap(<App />), document.getElementById('root'))\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\n//serviceWorker.unregister()\n"],"sourceRoot":""}