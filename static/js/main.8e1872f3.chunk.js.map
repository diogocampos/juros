{"version":3,"sources":["components/format.js","components/NumberField.js","constants.js","state/actionTypes.js","state/mode.js","state/values.js","state/calculate.js","state/results.js","state/index.js","components/Fields.js","components/Modes.js","components/Results.js","components/App.js","index.js"],"names":["DECIMAL_SEPARATOR","THOUSANDS_SEPARATOR","formatNumber","number","decimals","arguments","length","undefined","_number$toFixed$split","toFixed","split","_number$toFixed$split2","Object","slicedToArray","integer","fraction","modulo","thousands","slice","i","push","join","parseDigits","textValue","digits","replace","string","targetLength","padString","padding","padStart","cut","MAX_DIGITS","NumberField","inputRef","React","createRef","handleChange","event","target","value","_this","props","onChange","name","handleFocus","setTimeout","input","current","end","setSelectionRange","handleKeyDown","keyCode","preventDefault","_this$props","this","label","icon","Icon","icons","react_default","a","createElement","className","type","pattern","inputMode","placeholder","onClick","onFocus","onKeyDown","ref","Component","DEPOSIT","INSTALLMENT","INTEREST","LENGTH","PRICE","TOTAL","fieldNamesByMode","_fieldNamesByMode","defineProperty","fieldProps","_fieldProps","prefix","suffix","SET_MODE","SET_RESULTS","CLEAR_VALUES","SET_VALUE","modes","setMode","mode","defaultState","state","action","indexOf","clearValues","setValue","_defaultState","values","keys","objectSpread","calculate","_ref","_ref2","deposit","k","installment","interest","price","_installment","isNaN","Error","calculateInstallment","calculateTotal","owed","iterations","lowerBound","upperBound","interestRate","error","Math","abs","calculateInterest","concat","pow","calculateResults","dispatch","getState","_getState","results","_unused","setResults","actions","modeActions","valuesActions","resultsActions","rootReducer","combineReducers","reducer","newState","saveState","STATE","fn","delay","timeout","_len","args","Array","_key","clearTimeout","apply","debounce","localStorage","setItem","JSON","stringify","Fields","handleReset","onReset","handleSubmit","onSubmit","fieldNames","noValidate","map","src_components_NumberField","assign","key","connect","PercentageIcon","DollarSignIcon","currentMode","classNames","Number","Message","title","text","Results_Number","App","components_Modes","src_components_Fields","components_Results","ReactDOM","render","component","initialState","parse","getItem","loadState","store","createStore","applyMiddleware","thunk","es","wrap","components_App","document","getElementById"],"mappings":"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","file":"static/js/main.8e1872f3.chunk.js","sourcesContent":["const DECIMAL_SEPARATOR = ','\nconst THOUSANDS_SEPARATOR = '.'\n\n/**\n * Formats a number as a string with thousands and decimal separators.\n * @param {number} number The number\n * @param {number} decimals The amount of decimal digits to include\n * @returns {string} The resulting string\n */\nexport function formatNumber(number, decimals = 2) {\n  const [integer, fraction] = number.toFixed(decimals).split('.')\n  const modulo = integer.length % 3\n  const thousands = modulo ? [integer.slice(0, modulo)] : []\n  for (let i = modulo; i < integer.length; i += 3) {\n    thousands.push(integer.slice(i, i + 3))\n  }\n  return (\n    thousands.join(THOUSANDS_SEPARATOR) +\n    (fraction ? DECIMAL_SEPARATOR + fraction : '')\n  )\n}\n\n/**\n * Parses a string of digits into a number.\n * @param {string} textValue The string\n * @param {number} decimals The amount of decimal digits to consider\n * @returns {number} The corresponding number\n */\nexport function parseDigits(textValue, decimals = 2) {\n  let digits = textValue.replace(/[^\\d]/g, '')\n  if (digits.length < decimals) digits = padStart(digits, decimals, '0')\n\n  const cut = digits.length - decimals\n  return +(digits.slice(0, cut) + '.' + digits.slice(cut))\n}\n\nfunction padStart(string, targetLength, padString = ' ') {\n  for (var padding = ''; padding.length + string.length < targetLength; ) {\n    padding += padString\n  }\n  return padding.slice(0, targetLength - string.length) + string\n}\n","import React from 'react'\n\nimport './NumberField.css'\nimport { formatNumber, parseDigits } from './format'\nimport * as icons from './icons'\n\nconst MAX_DIGITS = 15\n\nclass NumberField extends React.Component {\n  inputRef = React.createRef()\n\n  handleChange = event => {\n    const digits = event.target.value.replace(/[^\\d]/g, '')\n    if (digits.length > MAX_DIGITS) return\n\n    const value = parseDigits(digits, this.props.decimals)\n    this.props.onChange(this.props.name, value)\n  }\n\n  handleFocus = () => {\n    setTimeout(() => {\n      const input = this.inputRef.current\n      const end = input.value.length\n      input.setSelectionRange(end, end)\n    }, 0)\n  }\n\n  handleKeyDown = event => {\n    // Ignore arrow keys, Home/End, Page Up/Down\n    if (33 <= event.keyCode && event.keyCode <= 40) event.preventDefault()\n\n    // Escape key clears the field\n    if (event.keyCode === 27) this.props.onChange(this.props.name)\n  }\n\n  render() {\n    const { name, label, icon, value, decimals } = this.props\n    const Icon = icons[icon]\n    return (\n      <label className=\"NumberField\">\n        <span className=\"NumberField-label\">{label}</span>\n        <div className=\"NumberField-control\">\n          <input\n            className=\"NumberField-input\"\n            type=\"text\"\n            pattern=\"[0-9]*\" // Show numeric keyboard on iOS\n            inputMode=\"decimal\" // Show numeric keyboard on Android\n            placeholder={formatNumber(0, decimals)}\n            name={name}\n            value={value ? formatNumber(value, decimals) : ''}\n            onChange={this.handleChange}\n            onClick={this.handleFocus}\n            onFocus={this.handleFocus}\n            onKeyDown={this.handleKeyDown}\n            ref={this.inputRef}\n          />\n          {Icon && <Icon className=\"NumberField-icon\" />}\n        </div>\n      </label>\n    )\n  }\n}\n\nexport default NumberField\n","export const DEPOSIT = 'deposit'\nexport const INSTALLMENT = 'installment'\nexport const INTEREST = 'interest'\nexport const LENGTH = 'length'\nexport const PRICE = 'price'\nexport const TOTAL = 'total'\n\nexport const fieldNamesByMode = {\n  [INSTALLMENT]: [PRICE, DEPOSIT, LENGTH, INTEREST],\n  [INTEREST]: [PRICE, DEPOSIT, LENGTH, INSTALLMENT],\n}\n\nexport const fieldProps = {\n  [DEPOSIT]: {\n    label: 'Entrada',\n    prefix: '$',\n    icon: 'DollarSignIcon',\n  },\n  [INSTALLMENT]: {\n    label: 'Valor da parcela',\n    prefix: '$',\n    icon: 'DollarSignIcon',\n  },\n  [INTEREST]: {\n    label: 'Taxa de juros',\n    suffix: '%',\n    icon: 'PercentageIcon',\n  },\n  [LENGTH]: {\n    label: 'Número de parcelas',\n    decimals: 0,\n    icon: 'CalendarAltIcon',\n  },\n  [PRICE]: {\n    label: 'Valor à vista',\n    prefix: '$',\n    icon: 'DollarSignIcon',\n  },\n  [TOTAL]: {\n    label: 'Total a prazo',\n    prefix: '$',\n    icon: 'DollarSignIcon',\n  },\n}\n","export const SET_MODE = 'mode/set-mode'\n\nexport const SET_RESULTS = 'results/set-results'\n\nexport const CLEAR_VALUES = 'values/clear-values'\nexport const SET_VALUE = 'values/set-value'\n","import { SET_MODE } from './actionTypes'\nimport { INSTALLMENT, INTEREST } from '../constants'\n\nconst modes = [INSTALLMENT, INTEREST]\n\n// ACTIONS\n\nexport const setMode = mode => ({ type: SET_MODE, mode })\n\n// REDUCER\n\nconst defaultState = INTEREST\n\nexport default function mode(state = defaultState, action) {\n  switch (action.type) {\n    case SET_MODE:\n      if (modes.indexOf(action.mode) < 0) return state\n      return action.mode\n\n    default:\n      return state\n  }\n}\n","import { CLEAR_VALUES, SET_VALUE } from './actionTypes'\nimport { DEPOSIT, INSTALLMENT, INTEREST, LENGTH, PRICE } from '../constants'\n\n// ACTIONS\n\nexport const clearValues = () => ({ type: CLEAR_VALUES })\nexport const setValue = (name, value) => ({ type: SET_VALUE, name, value })\n\n// REDUCER\n\nconst defaultState = {\n  [DEPOSIT]: 0,\n  [INSTALLMENT]: 0,\n  [INTEREST]: 0,\n  [LENGTH]: 0,\n  [PRICE]: 0,\n}\n\nexport default function values(state = defaultState, action) {\n  switch (action.type) {\n    case CLEAR_VALUES:\n      return defaultState\n\n    case SET_VALUE:\n      const { name, value } = action\n      if (Object.keys(defaultState).indexOf(name) < 0) return state\n      return { ...state, [name]: value || defaultState[name] }\n\n    default:\n      return state\n  }\n}\n","import * as k from '../constants'\n\nexport default function calculate(mode, values) {\n  let deposit = values[k.DEPOSIT]\n  let installment = values[k.INSTALLMENT]\n  let interest = values[k.INTEREST]\n  let length = values[k.LENGTH]\n  let price = values[k.PRICE]\n\n  switch (mode) {\n    case k.INSTALLMENT:\n      installment = calculateInstallment(price, deposit, length, interest)\n      return {\n        [k.INSTALLMENT]: installment,\n        [k.TOTAL]: calculateTotal(deposit, length, installment),\n      }\n\n    case k.INTEREST:\n      return {\n        [k.INTEREST]: calculateInterest(price, deposit, length, installment),\n        [k.TOTAL]: calculateTotal(deposit, length, installment),\n      }\n\n    default:\n      throw new Error(`Invalid mode: '${mode}'`)\n  }\n}\n\nfunction calculateInstallment(price, deposit, length, interest) {\n  const owed = price - deposit\n  const installment = _installment(owed, interest / 100, length)\n  if (isNaN(installment)) throw new Error('Installment calculation failed')\n  return installment\n}\n\nfunction calculateInterest(price, deposit, length, installment) {\n  const owed = price - deposit\n  let iterations = 0\n  let [lowerBound, upperBound] = [0, 1e6]\n\n  while (++iterations <= 1000) {\n    const interestRate = (lowerBound + upperBound) / 2\n    const error = _installment(owed, interestRate, length) - installment\n\n    if (Math.abs(error) < 1e-6) {\n      return interestRate * 100\n    }\n    if (error > 0) {\n      upperBound = interestRate\n    } else {\n      lowerBound = interestRate\n    }\n  }\n\n  throw new Error('Interest calculation did not converge')\n}\n\nfunction calculateTotal(deposit, length, installment) {\n  return deposit + length * +installment.toFixed(2)\n}\n\nfunction _installment(owed, interestRate, length) {\n  if (interestRate > 0) {\n    return (owed * interestRate) / (1 - 1 / Math.pow(1 + interestRate, length))\n  } else {\n    return owed / length\n  }\n}\n","import { CLEAR_VALUES, SET_MODE, SET_RESULTS, SET_VALUE } from './actionTypes'\nimport calculate from './calculate'\n\n// ACTIONS\n\nconst setResults = results => ({ type: SET_RESULTS, results })\n\nexport const calculateResults = () => (dispatch, getState) => {\n  const { mode, values } = getState()\n  try {\n    var results = calculate(mode, values)\n  } catch {\n    results = 'error'\n  }\n  dispatch(setResults(results))\n}\n\n// REDUCER\n\nconst defaultState = null\n\nexport default function results(state = defaultState, action) {\n  switch (action.type) {\n    case SET_RESULTS:\n      return action.results\n\n    case CLEAR_VALUES:\n    case SET_MODE:\n    case SET_VALUE:\n      return defaultState\n\n    default:\n      return state\n  }\n}\n","import React from 'react'\nimport { Provider } from 'react-redux'\nimport { applyMiddleware, combineReducers, createStore } from 'redux'\nimport thunk from 'redux-thunk'\n\nimport mode, * as modeActions from './mode'\nimport values, * as valuesActions from './values'\nimport results, * as resultsActions from './results'\n\nexport const actions = {\n  ...modeActions,\n  ...valuesActions,\n  ...resultsActions,\n}\n\nconst rootReducer = combineReducers({\n  mode,\n  values,\n  results,\n})\n\nfunction reducer(state, action) {\n  const newState = rootReducer(state, action)\n  if (newState !== state) saveState(newState)\n  return newState\n}\n\nexport function wrap(component) {\n  const initialState = loadState() || {}\n  const store = createStore(reducer, initialState, applyMiddleware(thunk))\n  return <Provider store={store}>{component}</Provider>\n}\n\n// Storage\n\nconst STATE = 'state'\n\nconst saveState = debounce(state => {\n  localStorage.setItem(STATE, JSON.stringify(state))\n}, 1000)\n\nfunction loadState() {\n  try {\n    return JSON.parse(localStorage.getItem(STATE) || '')\n  } catch {}\n}\n\n// Helpers\n\nfunction debounce(fn, delay) {\n  let timeout = null\n  return (...args) => {\n    if (timeout) clearTimeout(timeout)\n    timeout = setTimeout(() => {\n      fn(...args)\n      timeout = null\n    }, delay)\n  }\n}\n","import React from 'react'\nimport { connect } from 'react-redux'\n\nimport './Fields.css'\nimport NumberField from './NumberField'\nimport { fieldNamesByMode, fieldProps } from '../constants'\nimport { actions } from '../state'\n\nclass Fields extends React.Component {\n  handleReset = event => {\n    event.preventDefault()\n    this.props.onReset()\n  }\n\n  handleSubmit = event => {\n    event.preventDefault()\n    this.props.onSubmit()\n  }\n\n  render() {\n    const { mode, values, onChange } = this.props\n    const fieldNames = fieldNamesByMode[mode]\n    return (\n      <form\n        className=\"Fields\"\n        onReset={this.handleReset}\n        onSubmit={this.handleSubmit}\n        noValidate\n      >\n        <div className=\"Fields-inputs\">\n          {fieldNames.map(name => (\n            <NumberField\n              key={name}\n              name={name}\n              value={values[name]}\n              onChange={onChange}\n              {...fieldProps[name]}\n            />\n          ))}\n        </div>\n        <div className=\"Fields-buttons\">\n          <button className=\"Fields-button\" type=\"reset\">\n            Limpar\n          </button>\n          <button className=\"Fields-button primary\" type=\"submit\">\n            Calcular\n          </button>\n        </div>\n      </form>\n    )\n  }\n}\n\nconst mapStateToProps = state => ({\n  mode: state.mode,\n  values: state.values,\n})\n\nconst mapDispatchToProps = dispatch => ({\n  onChange: (name, value) => dispatch(actions.setValue(name, value)),\n  onReset: () => dispatch(actions.clearValues()),\n  onSubmit: () => dispatch(actions.calculateResults()),\n})\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Fields)\n","import classNames from 'classnames'\nimport React from 'react'\nimport { connect } from 'react-redux'\n\nimport './Modes.css'\nimport { DollarSignIcon, PercentageIcon } from './icons'\nimport { INSTALLMENT, INTEREST } from '../constants'\nimport { actions } from '../state'\n\nconst modes = [\n  { mode: INTEREST, label: 'Juros', Icon: PercentageIcon },\n  { mode: INSTALLMENT, label: 'Parcela', Icon: DollarSignIcon },\n]\n\nfunction Modes(props) {\n  const { mode: currentMode, onChange } = props\n  return (\n    <div className=\"Modes\">\n      {modes.map(({ mode, label, Icon }) => (\n        <button\n          key={mode}\n          className={classNames('Modes-mode', mode === currentMode && 'active')}\n          onClick={() => mode !== currentMode && onChange(mode)}\n        >\n          <Icon className=\"Modes-icon\" />\n          {label}\n        </button>\n      ))}\n    </div>\n  )\n}\n\nconst mapStateToProps = state => ({\n  mode: state.mode,\n})\n\nconst mapDispatchToProps = dispatch => ({\n  onChange: mode => dispatch(actions.setMode(mode)),\n})\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Modes)\n","import classNames from 'classnames'\nimport React from 'react'\nimport { connect } from 'react-redux'\n\nimport './Results.css'\nimport { formatNumber } from './format'\nimport { fieldProps } from '../constants'\n\nfunction Results(props) {\n  const { results } = props\n  return (\n    <div className={classNames('Results', results === 'error' && 'error')}>\n      {!results ? (\n        <Message text=\"Preencha os valores e clique em Calcular.\" />\n      ) : results === 'error' ? (\n        <Message title=\"Erro\" text=\"Verifique os valores preenchidos.\" />\n      ) : (\n        Object.keys(results).map(name => (\n          <Number key={name} {...fieldProps[name]} value={results[name]} />\n        ))\n      )}\n    </div>\n  )\n}\n\nfunction Number(props) {\n  const { label, prefix, value, decimals, suffix } = props\n  return (\n    <div className=\"Results-item\">\n      <h3 className=\"Results-label\">{label}</h3>\n      <p className=\"Results-content\">\n        {prefix && <span className=\"Results-unit\">{prefix}</span>}\n        {formatNumber(value, decimals)}\n        {suffix && <span className=\"Results-unit\">{suffix}</span>}\n      </p>\n    </div>\n  )\n}\n\nfunction Message(props) {\n  const { title, text } = props\n  return (\n    <div className=\"Results-item\">\n      {title && <h3 className=\"Results-label\">{title}</h3>}\n      <p className=\"Results-content is-message\">{text}</p>\n    </div>\n  )\n}\n\nconst mapStateToProps = state => ({\n  results: state.results,\n})\n\nexport default connect(mapStateToProps)(Results)\n","import React from 'react'\n\nimport './App.css'\nimport Fields from './Fields'\nimport Modes from './Modes'\nimport Results from './Results'\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Modes />\n      <Fields />\n      <Results />\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport App from './components/App'\nimport { wrap } from './state'\n//import * as serviceWorker from './serviceWorker'\n\nReactDOM.render(wrap(<App />), document.getElementById('root'))\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\n//serviceWorker.unregister()\n"],"sourceRoot":""}